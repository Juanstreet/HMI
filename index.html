<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Microred UNIMET - Batería</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.9/dist/chart.umd.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='estilos.css') }}"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<script>
    // Llama una vez al cargar la página
    actualizarDatos();
</script>
</head>
<body class="sb-nav-fixed">
    <nav class="navbar">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div>
                <a class="navbar-brand d-none d-sm-block" id="titulo" href="#">Microred UNIMET</a>
            </div>
            
            <div>
            <p class="hora ps-3 d-none d-sm-block" style="color: beige; margin: 0%;"><span id="reloj"></span></p>
            <script>
                function actualizarReloj() {
                const ahora = new Date();
                const horas = ahora.getHours().toString().padStart(2, '0');
                const minutos = ahora.getMinutes().toString().padStart(2, '0');
                const segundos = ahora.getSeconds().toString().padStart(2, '0');
                document.getElementById('reloj').textContent = `${horas}:${minutos}:${segundos}`;
                }
                // Actualizar el reloj cada segundo
                setInterval(actualizarReloj, 1000);
                // Ejecutar inmediatamente para evitar el retraso inicial de 1 segundo
                actualizarReloj();
            </script>
            </div>

            <div class="offcanvas offcanvas-start text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Dark offcanvas</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Dropdown
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark">
                    <li><a class="dropdown-item" href="#">Action</a></li>
                    <li><a class="dropdown-item" href="#">Another action</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                </li>
                </ul>
                <form class="d-flex mt-3" role="search">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-success" type="submit">Search</button>
                </form>
            </div>
            </div>
        </div>
    </nav>


  <div class="container-fluid min-vh-100 bg-main px-0">
    <div class="row g-0 flex-nowrap flex-md-wrap">
      <!-- Sidebar -->
      <nav class="col-12 col-md-3 col-lg-2 sidebar bg-sidebar d-flex flex-md-column flex-row align-items-center align-items-md-start py-4">
        <div class="w-100 d-flex flex-row flex-md-column align-items-center">
          <iframe class="d-none d-md-block .d-lg-none" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3923.01315976197!2d-66.78690462605876!3d10.499628364240579!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8c2a576d54142307%3A0x346aa4e5e126367e!2sMetropolitan%20University!5e0!3m2!1sen!2sve!4v1746138141253!5m2!1sen!2sve" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          <div class="unimet-info card bg-panel text-white w-100 mb-3 p-3 ms-2 ms-md-0">
            <div class="fw-bold fs-5 mb-2">UNIMET</div>
            <div class="badge bg-success text-wrap mb-2 w-100">Conectado 9/12 a las 12:41pm</div>
            <div class="small mb-3">
              Laboratorio Energías Renovables<br>
              La Urbina – Caracas<br>
              Venezuela<br>
              Fecha Inicio <span class="fw-semibold">22-11-2024</span>
            </div>               
                
            <div class="temp-block text-center mb-2">
              <span class="display-6 fw-bold" id="Temperature_CF">{{ registro.get('Temperature_CF', '') }}</span>
            </div>
            <div class="d-flex justify-content-center small">
              <span class="ac-dot me-2"></span>AC
              <span class="dc-dot ms-4 me-2"></span>DC
            </div>
          </div>
        </div>
        <!-- Sidebar menú oculto en móvil -->
        <div class="sidebar-menu w-100 mt-3 d-none">
          <button class="btn btn-sidebar w-100 mb-2"><i class="bi bi-house"></i> Inicio</button>
          <button class="btn btn-sidebar w-100 mb-2 active"><i class="bi bi-battery-charging"></i> Batería</button>
          <button class="btn btn-sidebar w-100 mb-2"><i class="bi bi-lightning"></i> Red</button>
          <button class="btn btn-sidebar w-100 mb-2"><i class="bi bi-sun"></i> Solar</button>
        </div>
      </nav>
      <!-- Panel Central -->
      <main class="col-12 col-md-9 col-lg-10 bg-main px-0 px-md-3">
        <!-- Tabs superiores -->
        <ul class="nav nav-tabs custom-tabs px-2 pt-3" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="actual-tab" data-bs-toggle="tab" data-bs-target="#actual" type="button" role="tab">
              <i class="bi bi-speedometer2"></i> <span class="d-none d-sm-inline">Condición Actual</span>
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="red-tab" data-bs-toggle="tab" data-bs-target="#red" type="button" role="tab">
              <i class="bi bi-lightning-charge"></i> <span class="d-none d-sm-inline">Red Eléctrica</span>
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="bateria-tab" data-bs-toggle="tab" data-bs-target="#bateria" type="button" role="tab">
              <i class="bi bi-battery-charging"></i> <span class="d-none d-sm-inline">Batería</span>
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="carga-tab" data-bs-toggle="tab" data-bs-target="#carga" type="button" role="tab">
              <i class="bi bi-plug"></i> <span class="d-none d-sm-inline">Carga Eléctrica</span>
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="solar-tab" data-bs-toggle="tab" data-bs-target="#solar" type="button" role="tab">
              <i class="bi bi-sun"></i> <span class="d-none d-sm-inline">Solar</span>
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="energia-tab" data-bs-toggle="tab" data-bs-target="#energia" type="button" role="tab">
              <i class="bi bi-lightbulb"></i> <span class="d-none d-sm-inline">Energía</span>
            </button>
          </li>
        </ul>
<!-- Contenido de los tabs -->
        <div class="tab-content px-2 pt-3" id="myTabContent">

<!-- Tab Batería -->
          <div class="tab-pane fade show active" id="bateria" role="tabpanel" aria-labelledby="bateria-tab">
            <div class="d-flex flex-column flex-sm-row justify-content-between align-items-center mb-3 gap-3">
              <span class="badge bg-danger fs-4 px-4 py-2 rounded-pill">Batería</span>
            </div>
            <div class="row gx-2 gy-3" style="height: auto;">
              <!-- Autonomía -->
              <div class="col-12 col-sm-6 col-lg-3">
                <div class="card bg-panel text-white p-3 shadow-sm mb-3">
                  <div class="text-muted">Voltaje</div>
                  <div class="display-5 fw-bold"><span id="Voltage_bat">{{registro.get('Voltage_bat')|float}}</span><span class="fs-6">  V</span></div>
                  <div class="text-muted">Corriente</div>
                  <div class="display-5 fw-bold"><span id="Current_bat">{{registro.get('Current_bat')|float}}</span><span class="fs-6">  A</span></div>
                  <div class="text-muted">Autonomía</div>
                  <div class="display-5 fw-bold"><span id="autonomia_bat">{{registro.get('autonomia_bat')|float}}</span><span class="fs-6">  horas</span></div>
                </div>
                <!-- Estado de Carga Equivalente -->
                <div class="card bg-panel text-white p-3 shadow-sm mb-3">
                  <div class="text-muted mb-2">Estado de Carga Equivalente </div>
                  <div class="d-flex align-items-center">
                    <div class="circle-indicator me-3">{{ registro.get('Voltage Bus DC', '') }}</div>
                    <div>
                      <div class="small">Energía Nominal</div>
                      <div class="fw-bold">14 kWh</div>
                      <div class="small">Energía Disponible</div>
                      <div class="fw-bold">14 kWh</div>
                    </div>
                  </div>
                </div>
                <!-- Estado de Salud Equivalente -->
                <div class="card bg-panel text-white p-3 shadow-sm mb-3">
                  <div class="text-muted mb-2">Estado de Salud Equivalente</div>
                  <div class="d-flex align-items-center">
                    <div class="circle-indicator bg-blue me-3">
                      {{registro.get('soc_bat', '') }}
                    </div>
                    <div>
                      <div class="small">Ciclos</div>
                      <div class="fw-bold">45</div>
                      <div class="small">DoD Promedio</div>
                      <div class="fw-bold">14.4%</div>
                    </div>
                  </div>
                </div>
                <!-- Voltaje de las celdas -->
                <div class="card bg-panel text-white p-3 shadow-sm mb-3">
                  <div class="text-muted mb-2">Voltaje en las celdas</div>
                    <div class="actual-notifications-list">
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_1_bat">{{ registro.get('Voltage_cell_1_bat') }}</span><span class="text-secondary"> V        Celda 1</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_2_bat">{{ registro.get('Voltage_cell_2_bat') }}</span><span class="text-secondary"> V        Celda 2</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_3_bat">{{ registro.get('Voltage_cell_3_bat') }}</span><span class="text-secondary"> V        Celda 3</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_4_bat">{{ registro.get('Voltage_cell_4_bat') }}</span><span class="text-secondary"> V        Celda 4</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_5_bat">{{ registro.get('Voltage_cell_5_bat') }}</span><span class="text-secondary"> V        Celda 5</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_6_bat">{{ registro.get('Voltage_cell_6_bat') }}</span><span class="text-secondary"> V        Celda 6</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_7_bat">{{ registro.get('Voltage_cell_7_bat') }}</span><span class="text-secondary"> V        Celda 7</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_8_bat">{{ registro.get('Voltage_cell_8_bat') }}</span><span class="text-secondary"> V        Celda 8</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_9_bat">{{ registro.get('Voltage_cell_9_bat') }}</span><span class="text-secondary"> V        Celda 9</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_10_bat">{{ registro.get('Voltage_cell_10_bat') }}</span><span class="text-secondary"> V        Celda 10</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_11_bat">{{ registro.get('Voltage_cell_11_bat') }}</span><span class="text-secondary"> V        Celda 11</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_12_bat">{{ registro.get('Voltage_cell_12_bat') }}</span><span class="text-secondary"> V        Celda 12</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_13_bat">{{ registro.get('Voltage_cell_13_bat') }}</span><span class="text-secondary"> V        Celda 13</span></div>
                      <div class="fw-bold justify-content-between"><span id="Voltage_cell_14_bat">{{ registro.get('Voltage_cell_14_bat') }}</span><span class="text-secondary"> V        Celda 14</span></div>
                    </div>
                </div>
              </div>
              
              
              
              
              
              <!-- Gráfico de variables eléctricas -->
              <div class="col-9">
                <div class="card bg-panel text-white p-3 shadow-sm mb-3">
                  <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-2 gap-2">
                    <span class="fw-bold">Variables Eléctricas (Tensión - Corriente)</span>
                    <span class="badge bg-info text-dark">Recarga</span>
                  </div>
                  <canvas id="grafico-bateria" style="min-height:180px;max-height:280px;"></canvas>
                </div>
                <!-- Promedios y Descargas -->
                <div class="card bg-panel text-white p-3 shadow-sm">
                  <div class="row text-center">
                    <div class="col-6 col-md-4 col-lg-2 mb-2">
                      <div class="small">Promedio</div>
                      <div class="fw-bold">8.31</div>
                      <div class="small">días entre Descargas</div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2 mb-2">
                      <div class="fw-bold">2.24</div>
                      <div class="small">horas Descarga</div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2 mb-2">
                      <div class="fw-bold">5</div>
                      <div class="small">Descargas Mensual</div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2 mb-2">
                      <div class="small">Descargas</div>
                      <div class="fw-bold">19/11/2024</div>
                      <div class="small">Última</div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2 mb-2">
                      <div class="fw-bold">8.24</div>
                      <div class="small">horas Mayor Tiempo</div>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2 mb-2">
                      <div class="fw-bold">2</div>
                      <div class="small">Descargas profundas</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Tap Actual -->
          <div class="tab-pane fade" id="actual" role="tabpanel" aria-labelledby="actual-tab">
            <div class="actual-tab-container container-fluid py-3">
              <div class="actual-tab-container container-fluid py-3">
                <div class="row justify-content-center">
                  <!-- Estado Actual Panel -->
                  <div class="col-12">
                    <h3 class="actual-title mb-3">ESTADO ACTUAL</h3>
                  </div>

                  <div class="col-12 col-lg-6 d-flex flex-column flex-lg-row gap-3 mb-3">
                    <!-- Condición Sistema + Autonomía + Estado de Carga Batería -->
                    <div class="actual-card flex-grow-1 mb-2 mb-lg-0">
                      <div class="fw-semibold mb-2" style="color:#ff9e5e;">Condición Sistema</div>
                      <div class="mb-2" style="font-size:1.05rem; color:#333;">Red Presente<br>Solar Aportando</div>
                      <div class="d-flex flex-row gap-3 align-items-center mb-2">
                        <div>
                          <div class="actual-label-orange">Autonomía (horas)</div>
                          <div class="d-flex align-items-end gap-3">
                            <div class="actual-autonomia-num orange">{{ registro.get('autonomia_bat', '') }}<br><span class="actual-label-small">Batería</span></div>
                            <div class="actual-autonomia-num orange">{{ registro.get('autonomia_total', '') }}<br><span class="actual-label-small">Batería + Solar</span></div>
                          </div>
                        </div>
                      </div>
                      <div class="fw-semibold actual-label-orange mb-1">Estado de Carga Batería</div>
                      <div class="actual-battery-status">{{registro.get('soc_bat', '') }}<span class="actual-battery-status-unit">%</span></div>
                    </div>
                    <!-- Notificaciones Activas -->
                    <div class="actual-card flex-grow-1 mb-2 mb-lg-0">
                      <div class="fw-semibold mb-2" style="color:#ff9e5e;">Notificaciones Activas</div>
                      <div class="actual-notifications-list">
                        <div class="actual-notif actual-notif-red">Batería baja</div>
                        <div class="actual-notif actual-notif-green">Red Conectada</div>
                        <div class="actual-notif actual-notif-blue">Carga de batería</div>
                        <div class="actual-notif actual-notif-yellow">Nivel de Combustible bajo</div>
                        <div class="actual-notif actual-notif-red">Batería baja</div>
                        <div class="actual-notif actual-notif-red">Batería baja</div>
                        <div class="actual-notif actual-notif-red">Batería baja</div>
                      </div>
                    </div>
                  </div>

                  <!-- Diagrama flujo (iconografía) -->
                  <div class="col-12 mb-4">
                    <div class="actual-diagram d-flex flex-row justify-content-center align-items-center gap-4 py-3 flex-wrap">
                      <div class="actual-diagram-icon">
                        <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/26a1.svg" width="44" alt="Red" />
                        <div class="actual-diagram-label">Red Eléctrica</div>
                      </div>
                      <span class="actual-diagram-arrow"></span>
                      <div class="actual-diagram-icon">
                        <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/2600.svg" width="44" alt="Solar" />
                        <div class="actual-diagram-label">Solar</div>
                      </div>
                      <span class="actual-diagram-arrow"></span>
                      <div class="actual-diagram-icon">
                        <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f50b.svg" width="44" alt="Batería" />
                        <div class="actual-diagram-label">Batería</div>
                      </div>
                      <span class="actual-diagram-arrow"></span>
                      <div class="actual-diagram-icon">
                        <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f4a1.svg" width="44" alt="Carga" />
                        <div class="actual-diagram-label">Carga</div>
                      </div>
                    </div>
                  </div>

                  <!-- Paneles info inferiores -->
                  <div class="col-12">
                    <div class="row g-3">
                      <!-- Carga Eléctrica -->
                      <div class="col-12 col-sm-6 col-lg-3">
                        <div class="actual-bottom-card h-100">
                          <div class="actual-bottom-title blue">CARGA ELÉCTRICA</div>
                          <div class="actual-bottom-status blue">CONECTADO</div>
                          <div class="actual-bottom-info">
                            <div><span class="actual-bottom-val" id="power_carga">{{ registro.get('power_carga', 0)|int }}</span> <span class="actual-bottom-unit">kW</span></div>
                            <div><span class="actual-bottom-val" id="voltage_output_i1">{{registro.get('voltage_output_i1', 0)|float}}</span><span class="actual-bottom-val">{{registro.get('voltage_output_i1', 0)|float}}</span> <span class="actual-bottom-unit">VAC</span></div>
                            <div><span class="actual-bottom-val" id="current_carga"> {{registro.get('current_carga',0)|float}}</span> <span class="actual-bottom-unit">A</span></div>
                          </div>
                        </div>
                      </div>
                      <!-- Red Eléctrica -->
                      <div class="col-12 col-sm-6 col-lg-3">
                        <div class="actual-bottom-card h-100">
                          <div class="actual-bottom-title blue">RED ELÉCTRICA</div>
                          <div class="actual-bottom-status blue">CONECTADO</div>
                          <div class="actual-bottom-info">
                            <div><span class="actual-bottom-val" id="power_red">{{registro.get('power_red',0)|int}}</span> <span class="actual-bottom-unit">kW</span></div>
                            <div><span class="actual-bottom-val" id="voltage_ac">{{registro.get('voltage_ac',0)|float}}</span> <span class="actual-bottom-unit">VAC</span></div>
                            <div><span class="actual-bottom-val" id="current_ac">{{registro.get('current_ac',0)|float}}</span> <span class="actual-bottom-unit">A</span></div>
                          </div>
                        </div>
                      </div>
                      <!-- Batería -->
                      <div class="col-12 col-sm-6 col-lg-3">
                        <div class="actual-bottom-card h-100">
                          <div class="actual-bottom-title orange">BATERIA</div>
                          <div class="actual-bottom-status orange">RECARGA</div>
                          <div class="actual-bottom-info">
                            <div><span class="actual-bottom-val" id="power_bat">{{registro.get('power_bat',0)|int}}</span> <span class="actual-bottom-unit">kW</span></div>
                            <div><span class="actual-bottom-val" id="Voltage_bat">{{registro.get('Voltage_bat',0)|float}}</span> <span class="actual-bottom-unit">VDC</span></div>
                            <div><span class="actual-bottom-val" id="Current_bat">{{registro.get('Current_bat',0)|float}}</span> <span class="actual-bottom-unit">A</span></div>
                          </div>
                        </div>
                      </div>
                      <!-- Solar -->
                      <div class="col-12 col-sm-6 col-lg-3">
                        <div class="actual-bottom-card h-100">
                          <div class="actual-bottom-title blue">SOLAR</div>
                          <div class="actual-bottom-status blue">CONECTADO</div>
                          <div class="actual-bottom-info">
                            <div><span class="actual-bottom-val" id="Charging_Power_solar">{{registro.get('Charging_Power_solar',0)|int}}</span> <span class="actual-bottom-unit">kW</span></div>
                            <div><span class="actual-bottom-val" id="Voltage_PV_solar">{{registro.get('Voltage_PV_solar',0)|float}}</span> <span class="actual-bottom-unit">VDC</span></div>
                            <div><span class="actual-bottom-val" id="Charging_Current_solar">{{registro.get('Charging_Current_solar',0)|float}}</span> <span class="actual-bottom-unit">A</span></div>
                          </div>
                        </div>
                      </div>
                    </div><!-- row -->
                  </div>
                </div>
              </div>

            </div>
          </div>

          <!-- Tab Red  -->
          <div class="tab-pane fade" id="red" role="tabpanel" aria-labelledby="red-tab">
            <div class="rede-tab-container container-fluid py-3">
              <div class="row">
    <!-- Título y estado -->
    <div class="col-12 mb-3 d-flex align-items-center gap-3">
      <h3 class="rede-title mb-0">Red Eléctrica</h3>
      <span class="badge rede-badge bg-success"><i class="bi bi-check-circle-fill"></i> Disponible</span>
    </div>
    <!-- Paneles de métricas y gráfica -->
    <div class="col-lg-5 d-flex flex-column gap-3 mb-4 mb-lg-0">
      <!-- Estatus Actual -->
      <div class="rede-card">
        <div class="rede-label text-warning mb-2">Estatus Actual</div>
        <div class="row">
          <div class="col-6">
            <div class="rede-subtitle">Tensión</div>
            <div class="rede-value">208 <span class="rede-unit">VAC</span></div>
            <div class="rede-value">208 <span class="rede-unit">VAC</span></div>
            <div class="rede-value">208 <span class="rede-unit">VAC</span></div>
            <div class="rede-value">208 <span class="rede-unit">VAC</span></div>
            <div class="mt-2 rede-subtitle">Corriente</div>
            <div class="rede-value">208 <span class="rede-unit">A</span></div>
            <div class="rede-value">208 <span class="rede-unit">A</span></div>
          </div>
          <div class="col-6">
            <div class="rede-subtitle">Potencia Activa</div>
            <div class="rede-value">208 <span class="rede-unit">VAC</span></div>
            <div class="rede-value">208 <span class="rede-unit">VAC</span></div>
            <div class="rede-value">208 <span class="rede-unit">VAC</span></div>
            <div class="rede-value">208 <span class="rede-unit">VAC</span></div>
            <div class="mt-2 rede-subtitle">Potencia Aparente</div>
            <div class="rede-value">208 <span class="rede-unit">A</span></div>
            <div class="rede-value">208 <span class="rede-unit">A</span></div>
          </div>
        </div>
      </div>
      <!-- Potencia -->
      <div class="row g-3">
        <div class="col-6">
          <div class="rede-card text-center">
            <div class="rede-label text-warning">Potencia</div>
            <div class="d-flex justify-content-between mt-2">
              <div class="rede-main-value">76 <span class="rede-unit">kW</span></div>
              <div class="rede-desc">Promedio Mensual</div>
            </div>
            <div class="d-flex justify-content-between mt-2">
              <div class="rede-main-value">65 <span class="rede-unit">kW</span></div>
              <div class="rede-desc">Máxima</div>
            </div>
          </div>
        </div>
        <!-- Energía -->
        <div class="col-6">
          <div class="rede-card text-center">
            <div class="rede-label text-info">Energía</div>
            <div class="d-flex justify-content-between mt-2">
              <div class="rede-main-value">76 <span class="rede-unit">kWh</span></div>
              <div class="rede-desc">Promedio Mensual</div>
            </div>
            <div class="d-flex justify-content-between mt-2">
              <div class="rede-main-value">65 <span class="rede-unit">kWh</span></div>
              <div class="rede-desc">Acumulado Mes</div>
            </div>
          </div>
        </div>
      </div>
      <!-- Desempeño -->
      <div class="row g-3">
        <div class="col-12">
          <div class="rede-card text-center">
            <div class="rede-label text-success mb-2">Desempeño</div>
            <div class="row">
              <div class="col-4">
                <div class="rede-main-value">8.31 <span class="rede-unit">días</span></div>
                <div class="rede-desc">MTBF</div>
              </div>
              <div class="col-4">
                <div class="rede-main-value">2.24 <span class="rede-unit">horas</span></div>
                <div class="rede-desc">MTTR</div>
              </div>
              <div class="col-4">
                <div class="rede-main-value">99.42 <span class="rede-unit">%</span></div>
                <div class="rede-desc">Disponibilidad</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Fallas Eléctricas -->
      <div class="row g-3">
        <div class="col-12">
          <div class="rede-card text-center">
            <div class="rede-label text-danger mb-2">Fallas Eléctricas</div>
            <div class="row">
              <div class="col-4">
                <div class="rede-main-value">19/11/2024</div>
                <div class="rede-desc">Última Falla</div>
              </div>
              <div class="col-4">
                <div class="rede-main-value">8.24 <span class="rede-unit">horas</span></div>
                <div class="rede-desc">Falla Mayor Tiempo</div>
              </div>
              <div class="col-4">
                <div class="rede-main-value">{{pot_prom_mensual_red}}</div>
                <div class="rede-desc">Promedio Mensual</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Gráfica -->
    <div class="col-lg-7">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <div class="rede-label h5 mb-0">Variables Eléctricas <span class="small">(Tensión – Corriente)</span></div>
      </div>
      <div class="rede-chart-card mb-0">
        <canvas id="redeChart"></canvas>
      </div>
    </div>
              </div>
            </div>
          </div>

          <!-- Tab Carga -->
          <div class="tab-pane fade" id="carga" role="tabpanel" aria-labelledby="carga-tab">
            <!-- Tab Carga Eléctrica -->
            <div class="tab-pane fade show active" id="carga" role="tabpanel" aria-labelledby="carga-tab">
                <div class="d-flex flex-column flex-sm-row justify-content-between align-items-center mb-3 gap-3">
                    <span class="badge bg-danger fs-4 px-4 py-2 rounded-pill">Carga Eléctrica</span>
                    <div class="fs-4 text-white" id="hora-actual-carga"></div>
                </div>
                <div class="row gx-2 gy-3">
                    <!-- Condición Actual -->
                    <div class="col-12 col-md-4 col-lg-3">
                    <div class="card bg-panel text-white h-100 p-3 shadow-sm mb-2">
                        <div class="fw-bold text-section-title mb-2">Condición Actual</div>
                        <div class="row">
                        <div class="col-6">
                            <div class="text-muted small mb-1">Tensión</div>
                            <div class="fw-bold">208 <span class="text-secondary">VAC</span></div>
                            <div class="fw-bold">208 <span class="text-secondary">VAC</span></div>
                            <div class="fw-bold">208 <span class="text-secondary">VAC</span></div>
                        </div>
                        <div class="col-6">
                            <div class="text-muted small mb-1">Potencia Activa</div>
                            <div class="fw-bold">208 <span class="text-secondary">VAC</span></div>
                            <div class="fw-bold">208 <span class="text-secondary">VAC</span></div>
                            <div class="fw-bold">208 <span class="text-secondary">VAC</span></div>
                        </div>
                        </div>
                    </div>
                    <div class="card bg-panel text-white h-100 p-3 shadow-sm mb-2">
                        <div class="text-section-title fw-bold text-warning mb-1">Autonomía</div>
                        <div class="display-6 fw-bold text-white">135.2 <span class="fs-6">horas</span></div>
                        <div class="d-flex justify-content-between border-top pt-2 mt-2 text-info small">
                        <div>
                            <div>7.2 horas</div>
                            <div class="small">Batería</div>
                        </div>
                        <div>
                            <div>14.2 horas</div>
                            <div class="small">Solar + Batería</div>
                        </div>
                        </div>
                    </div>
                    <div class="row g-2">
                        <div class="col-6">
                        <div class="card bg-panel text-white h-100 p-3 shadow-sm">
                            <div class="text-section-title fw-bold text-warning mb-1">Potencia</div>
                            <div class="fs-5 fw-bold">76 <span class="fs-6">kW</span></div>
                            <div class="small text-info">Promedio mensual</div>
                            <div class="fs-6 fw-bold mt-2">65 <span class="fs-6">kW</span></div>
                            <div class="small text-info">Máxima</div>
                        </div>
                        </div>
                        <div class="col-6">
                        <div class="card bg-panel text-white h-100 p-3 shadow-sm">
                            <div class="text-section-title fw-bold text-warning mb-1">Energía</div>
                            <div class="fs-5 fw-bold">76 <span class="fs-6">kWh</span></div>
                            <div class="small text-info">Promedio Mensual</div>
                            <div class="fs-6 fw-bold mt-2">65 <span class="fs-6">kWh</span></div>
                            <div class="small text-info">Acumulado Mes</div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <!-- Gráficos -->
                    <div class="col-12 col-md-8 col-lg-9">
                    <div class="card bg-panel text-white p-3 shadow-sm mb-3">
                        <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-2 gap-2">
                        <span class="fw-bold">Variables Eléctricas <span class="text-warning">(Tensión – Corriente)</span></span>
                        </div>
                        <canvas id="grafico-carga-electrica" style="min-height:180px;max-height:260px;"></canvas>
                    </div>
                    <div class="card bg-panel text-white p-3 shadow-sm">
                        <div class="fw-bold text-warning mb-2">Energía Mensual</div>
                        <canvas id="grafico-energia-mensual" style="min-height:180px;max-height:260px;"></canvas>
                        <div class="d-flex flex-wrap justify-content-end small mt-1 gap-3">
                        <span class="legend-box bg-success"></span> Red
                        <span class="legend-box bg-acum"></span> Acumulado
                        <span class="legend-box bg-info"></span> Gestión
                        <span class="legend-box bg-proy"></span> Proyección
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            <script>
            // Gráfico Variables Eléctricas (Tensión-Corriente)
            window.addEventListener('DOMContentLoaded', () => {
                const ctx = document.getElementById('grafico-carga-electrica').getContext('2d');
                new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
                    datasets: [
                    {
                        label: 'Tensión',
                        data: [208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208],
                        borderColor: '#00bfff',
                        backgroundColor: 'rgba(0,191,255,0.12)',
                        borderWidth: 2,
                        tension: 0.4,
                        yAxisID: 'y',
                    },
                    {
                        label: 'Corriente',
                        data: [23, 22, 22, 23, 22, 21, 23, 23, 20, 19, 22, 21],
                        borderColor: '#39ff14',
                        backgroundColor: 'rgba(57,255,20,0.09)',
                        borderWidth: 2,
                        tension: 0.4,
                        yAxisID: 'y1',
                    },
                    {
                        label: 'Frecuencia',
                        data: [50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50],
                        borderColor: '#f4e900',
                        backgroundColor: 'rgba(244,233,0,0.08)',
                        borderWidth: 2,
                        borderDash: [6, 3],
                        tension: 0.4,
                        yAxisID: 'y2',
                    }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                    legend: { labels: { color: "#fff" } },
                    tooltip: { mode: 'index', intersect: false }
                    },
                    scales: {
                    x: { ticks: { color: "#fff" }, grid: { color: "#32445A" } },
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Tensión (VAC)', color: "#00bfff" },
                        ticks: { color: "#00bfff" },
                        grid: { color: "#263142" }
                    },
                    y1: {
                        beginAtZero: true,
                        position: 'right',
                        title: { display: true, text: 'Corriente (A)', color: "#39ff14" },
                        ticks: { color: "#39ff14" },
                        grid: { drawOnChartArea: false }
                    },
                    y2: {
                        beginAtZero: true,
                        position: 'right',
                        title: { display: true, text: 'Frecuencia (Hz)', color: "#f4e900" },
                        ticks: { color: "#f4e900" },
                        grid: { drawOnChartArea: false }
                    }
                    }
                }
                });

                // Gráfico Energía Mensual
                const ctx2 = document.getElementById('grafico-energia-mensual').getContext('2d');
                new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
                    datasets: [
                    {
                        label: 'Red',
                        data: [60, 70, 75, 80, 85, 90, 95, 100, 90, 85, 80, 75],
                        backgroundColor: '#22bb68',
                        borderRadius: 6,
                        barPercentage: 0.7,
                        categoryPercentage: 0.7,
                    },
                    {
                        label: 'Gestión',
                        data: [20, 25, 28, 30, 32, 35, 37, 40, 38, 36, 34, 32],
                        backgroundColor: '#00bfff',
                        borderRadius: 6,
                        barPercentage: 0.7,
                        categoryPercentage: 0.7,
                    },
                    {
                        label: 'Proyección',
                        data: [80, 90, 100, 110, 120, 130, 140, 150, 140, 130, 120, 110],
                        type: 'line',
                        borderColor: '#a8d4ff',
                        backgroundColor: 'rgba(168,212,255,0.13)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 0,
                        order: 3
                    },
                    {
                        label: 'Acumulado',
                        data: [60, 130, 205, 285, 370, 460, 555, 655, 745, 830, 910, 985],
                        type: 'line',
                        borderColor: '#c6b5fa',
                        backgroundColor: 'rgba(198,181,250,0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 0,
                        order: 4
                    }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                    legend: { labels: { color: "#fff" } },
                    tooltip: { mode: 'index', intersect: false }
                    },
                    scales: {
                    x: { ticks: { color: "#fff" }, grid: { color: "#32445A" } },
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'kWh', color: "#00bfff" },
                        ticks: { color: "#00bfff" },
                        grid: { color: "#263142" }
                    }
                    }
                }
                });
            });
            </script>
         </div>

          <!-- Tab Solar -->
          <div class="tab-pane fade" id="solar" role="tabpanel" aria-labelledby="solar-tab">
            <div class="solar-tab-container container-fluid py-3">
              <div class="row">
                <!-- Columna izquierda: Paneles de datos -->
                <div class="col-12 col-lg-5 d-flex flex-column gap-3">
                  <h3 class="solar-title mb-2">Solar</h3>
                  <!-- Estado actual -->
                  <div class="solar-card status-card mb-2">
                    <div class="d-flex justify-content-between align-items-center">
                      <div>
                        <span class="solar-label text-warning">Estatus Actual</span>
                        <div class="row mt-2">
                          <div class="col-6">
                            <span class="solar-subtitle">Tensión</span>
                            <div class="solar-value">208 <span class="solar-unit">VAC</span></div>
                            <div class="solar-value">208 <span class="solar-unit">VAC</span></div>
                            <div class="solar-value">208 <span class="solar-unit">VAC</span></div>
                            <div class="solar-value">208 <span class="solar-unit">VAC</span></div>
                          </div>
                          <div class="col-6">
                            <span class="solar-subtitle">Potencia Activa</span>
                            <div class="solar-value">208 <span class="solar-unit">VAC</span></div>
                            <div class="solar-value">208 <span class="solar-unit">VAC</span></div>
                            <div class="solar-value">208 <span class="solar-unit">VAC</span></div>
                            <div class="solar-value">208 <span class="solar-unit">VAC</span></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Aporte Instantáneo -->
                  <div class="solar-card d-flex align-items-center justify-content-between">
                    <div>
                      <div class="solar-label text-warning">Aporte Instantáneo</div>
                      <div class="d-flex align-items-center gap-3 mt-2">
                        <div class="solar-percentage-circle">
                          <span>90</span><span class="solar-unit-small">%</span>
                        </div>
                        <div>
                          <div class="solar-number">14.4 <span class="solar-unit">kW</span></div>
                          <div class="solar-desc">Potencia Solar</div>
                        </div>
                        <div>
                          <div class="solar-number">16.4 <span class="solar-unit">kW</span></div>
                          <div class="solar-desc">Potencia Carga</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Aporte Histórico -->
                  <div class="solar-card d-flex align-items-center justify-content-between">
                    <div>
                      <div class="solar-label text-warning">Aporte Histórico</div>
                      <div class="d-flex align-items-center gap-3 mt-2">
                        <div class="solar-percentage-circle">
                          <span>45</span><span class="solar-unit-small">%</span>
                        </div>
                        <div>
                          <div class="solar-number">4.4 <span class="solar-unit">kWh/día</span></div>
                          <div class="solar-desc">Promedio Solar</div>
                        </div>
                        <div>
                          <div class="solar-number">6.4 <span class="solar-unit">kWh/día</span></div>
                          <div class="solar-desc">Promedio Carga</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Rendimiento Histórico -->
                  <div class="solar-card d-flex align-items-center justify-content-between">
                    <div>
                      <div class="solar-label text-warning">Rendimiento Histórico</div>
                      <div class="d-flex align-items-center gap-3 mt-2">
                        <div class="solar-percentage-circle">
                          <span>65</span><span class="solar-unit-small">%</span>
                        </div>
                        <div>
                          <div class="solar-number">4.4 <span class="solar-unit">kWh/día</span></div>
                          <div class="solar-desc">Promedio Generado</div>
                        </div>
                        <div>
                          <div class="solar-number">8.4 <span class="solar-unit">kWh/día</span></div>
                          <div class="solar-desc">Promedio Esperado</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Columna derecha: Gráficas -->
                <div class="col-12 col-lg-7 mt-4 mt-lg-0">
                  <div class="d-flex align-items-center justify-content-between mb-2">
                    <div class="solar-label h5 mb-0">Variables Eléctricas <span class="small">(Tensión - Corriente)</span></div>
                    <div class="d-flex align-items-center gap-2">
                      <span class="badge solar-badge bg-success">Encendido</span>
                      <i class="bi bi-bar-chart-fill text-success" style="font-size:1.5rem;"></i>
                    </div>
                  </div>
                  <div class="solar-chart-card mb-3">
                    <canvas id="solarChart1"></canvas>
                  </div>
                  <div class="solar-label h6 mt-2 mb-1 text-warning">Energía Diaria</div>
                  <div class="solar-chart-card">
                    <canvas id="solarChart2"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Tab Energia -->
          <div class="tab-pane fade" id="energia" role="tabpanel" aria-labelledby="energia-tab">
            <!-- Tab: Energía (basado en la imagen proporcionada) -->
            <div class="energia-tab-container container-fluid py-3">
              <div class="row">
                <!-- Título -->
                <div class="col-12 mb-3">
                  <h3 class="energia-title mb-0">Energía</h3>
                </div>
                <!-- Paneles de métricas y gráficas -->
                <div class="col-lg-5 d-flex flex-column gap-3 mb-4 mb-lg-0">
                  <!-- Consumo -->
                  <div class="energia-card">
                    <div class="energia-label text-warning">Consumida</div>
                    <div class="d-flex align-items-center justify-content-between mt-2">
                      <div>
                        <div class="energia-main-value">76 <span class="energia-unit">MWh</span></div>
                        <div class="energia-desc">Año en curso</div>
                      </div>
                      <div>
                        <div class="energia-main-value">12.78 <span class="energia-unit">MWh</span></div>
                        <div class="energia-desc">Promedio Mensual</div>
                      </div>
                    </div>
                  </div>
                  <!-- Red Eléctrica -->
                  <div class="energia-card">
                    <div class="energia-label text-info">Red Eléctrica</div>
                    <div class="d-flex align-items-center justify-content-between mt-2">
                      <div>
                        <div class="energia-main-value">76 <span class="energia-unit">MWh</span></div>
                        <div class="energia-desc">Año en curso</div>
                      </div>
                      <div>
                        <div class="energia-main-value">12.78 <span class="energia-unit">MWh</span></div>
                        <div class="energia-desc">Promedio Mensual</div>
                      </div>
                    </div>
                  </div>
                  <!-- Autogenerada Renovable -->
                  <div class="energia-card">
                    <div class="energia-label text-success">Autogenerada Renovable</div>
                    <div class="d-flex align-items-center justify-content-between mt-2">
                      <div>
                        <div class="energia-main-value">76 <span class="energia-unit">MWh</span></div>
                        <div class="energia-desc">Año en curso</div>
                      </div>
                      <div>
                        <div class="energia-main-value">12.78 <span class="energia-unit">MWh</span></div>
                        <div class="energia-desc">Promedio Mensual</div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Gráficas -->
                <div class="col-lg-7">
                  <!-- Consumo Mensual -->
                  <div class="d-flex align-items-center justify-content-between mb-2">
                    <div class="energia-label h5 mb-0">Consumo Mensual</div>
                  </div>
                  <div class="energia-chart-card mb-4">
                    <canvas id="consumoMensualChart"></canvas>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="energia-label h6 mb-1 text-info">Energía Red Eléctrica</div>
                      <div class="energia-chart-card">
                        <canvas id="energiaRedChart"></canvas>
                      </div>
                    </div>
                    <div class="col-md-6 mt-3 mt-md-0">
                      <div class="energia-label h6 mb-1 text-success">Energía Autogenerada</div>
                      <div class="energia-chart-card">
                        <canvas id="energiaAutoChart"></canvas>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </main>
    </div>
  </div>

  <script>
    /* Gráfico Chart.js */
    window.addEventListener('DOMContentLoaded', () => {
    const ctx = document.getElementById('grafico-bateria').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
        datasets: [
          {
            label: 'Tensión',
            data: [54, 54, 54, 54, 54, 51, 54, 54, 54, 54, 54, 54],
            borderColor: '#00bfff',
            backgroundColor: 'rgba(0,191,255,0.12)',
            borderWidth: 2,
            tension: 0.4,
            yAxisID: 'y',
          },
          {
            label: 'Corriente',
            data: [0.1, 0.1, 0.1, 0.1, 2.0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1],
            borderColor: '#39ff14',
            backgroundColor: 'rgba(57,255,20,0.09)',
            borderWidth: 2,
            tension: 0.4,
            yAxisID: 'y1',
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { labels: { color: "#fff" } },
          tooltip: { mode: 'index', intersect: false }
        },
        scales: {
          x: { ticks: { color: "#fff" }, grid: { color: "#32445A" } },
          y: {
            beginAtZero: true,
            title: { display: true, text: 'Tensión (VDC)', color: "#00bfff" },
            ticks: { color: "#00bfff" },
            grid: { color: "#263142" }
          },
          y1: {
            beginAtZero: true,
            position: 'right',
            title: { display: true, text: 'Corriente (A)', color: "#39ff14" },
            ticks: { color: "#39ff14" },
            grid: { drawOnChartArea: false }
          }
        }
      }
    });
  });

  // Gráfico: Variables Eléctricas (Tensión - Corriente)
const ctx1 = document.getElementById('solarChart1').getContext('2d');
const solarChart1 = new Chart(ctx1, {
  type: 'line',
  data: {
    labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
    datasets: [
      {
        label: 'Potencia Solar',
        data: [90, 92, 88, 80, 100, 105, 120, 110, 90, 80, 70, 85],
        borderColor: '#13e0c8',
        backgroundColor: 'rgba(19,224,200,0.15)',
        tension: 0.4,
        fill: false,
        pointRadius: 2
      },
      {
        label: 'Potencia Carga',
        data: [80, 82, 79, 78, 100, 95, 110, 100, 85, 75, 65, 80],
        borderColor: '#4c9aff',
        backgroundColor: 'rgba(76,154,255,0.15)',
        tension: 0.4,
        fill: false,
        pointRadius: 2
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { labels: {color: '#fff'} },
      title: {
        display: false
      },
      tooltip: {
        mode: 'index',
        intersect: false,
      }
    },
    scales: {
      x: {
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.1)' }
      },
      y: {
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.12)' }
      }
    }
  }
});

// Gráfico: Energía Diaria
  const ctx2 = document.getElementById('solarChart2').getContext('2d');
  const solarChart2 = new Chart(ctx2, {
    type: 'bar',
    data: {
      labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
      datasets: [
        {
          label: 'Solar',
          data: [100, 120, 110, 130, 140, 150, 155, 160, 145, 130, 120, 110],
          backgroundColor: 'rgba(19,224,200,0.6)',
          borderColor: '#13e0c8',
          borderWidth: 1
        },
        {
          label: 'Carga',
          data: [90, 110, 105, 120, 130, 140, 150, 155, 135, 125, 115, 100],
          backgroundColor: 'rgba(76,154,255,0.5)',
          borderColor: '#4c9aff',
          borderWidth: 1
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { labels: {color: '#fff'} },
        title: {
          display: false
        },
        tooltip: {
          mode: 'index',
          intersect: false,
        }
      },
      scales: {
        x: {
          ticks: {color: '#85e8f7'},
          grid: { color: 'rgba(136, 136, 136, 0.1)' }
        },
        y: {
          beginAtZero: true,
          ticks: {color: '#85e8f7'},
          grid: { color: 'rgba(136, 136, 136, 0.12)' }
        }
      }
    }
  });
  
// Consumo Mensual (barra + línea)
const ctxCM = document.getElementById('consumoMensualChart').getContext('2d');
new Chart(ctxCM, {
  type: 'bar',
  data: {
    labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
    datasets: [
      {
        label: 'Red',
        data: [60, 65, 70, 75, 70, 80, 82, 83, 80, 76, 74, 70],
        backgroundColor: 'rgba(62,184,255,0.7)',
        borderColor: '#3eb8ff',
        borderWidth: 1
      },
      {
        label: 'Autogén',
        data: [12, 14, 13, 15, 16, 18, 20, 19, 17, 14, 13, 12],
        backgroundColor: 'rgba(19,224,200,0.6)',
        borderColor: '#13e0c8',
        borderWidth: 1
      },
      {
        label: 'Proyección',
        data: [70, 75, 80, 85, 86, 90, 92, 95, 90, 85, 83, 80],
        type: 'line',
        borderColor: '#ffe066',
        backgroundColor: 'rgba(255,224,102,0.2)',
        fill: false,
        tension: 0.3,
        pointRadius: 2,
        borderWidth: 2
      },
      {
        label: 'Año Acumulado',
        data: [60, 125, 195, 270, 340, 420, 502, 585, 665, 741, 819, 899],
        type: 'line',
        borderColor: '#ffcf30',
        backgroundColor: 'rgba(255,207,48,0.2)',
        fill: false,
        tension: 0.2,
        pointRadius: 2,
        borderWidth: 2
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { labels: {color: '#fff'} },
      tooltip: { mode: 'index', intersect: false }
    },
    scales: {
      x: {
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.1)' }
      },
      y: {
        beginAtZero: true,
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.12)' }
      }
    }
  }
});
// Energía Red Eléctrica
const ctxRed = document.getElementById('energiaRedChart').getContext('2d');
new Chart(ctxRed, {
  type: 'bar',
  data: {
    labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
    datasets: [
      {
        label: 'Suministrada',
        data: [10, 12, 11, 13, 14, 15, 14, 15, 14, 13, 12, 11],
        backgroundColor: 'rgba(62,184,255,0.7)',
        borderColor: '#3eb8ff',
        borderWidth: 1
      },
      {
        label: 'No-suministrada',
        data: [2, 3, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2],
        backgroundColor: 'rgba(255,99,132, 0.4)',
        borderColor: 'rgba(255,99,132, 1)',
        borderWidth: 1
      },
      {
        label: 'Excedente',
        data: [1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0],
        backgroundColor: 'rgba(255, 207, 48, 0.7)',
        borderColor: '#ffcf30',
        borderWidth: 1
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { labels: {color: '#fff'} },
      tooltip: { mode: 'index', intersect: false }
    },
    scales: {
      x: {
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.1)' }
      },
      y: {
        beginAtZero: true,
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.12)' }
      }
    }
  }
});
// Energía Autogenerada
const ctxAuto = document.getElementById('energiaAutoChart').getContext('2d');
new Chart(ctxAuto, {
  type: 'bar',
  data: {
    labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
    datasets: [
      {
        label: 'Suministrada',
        data: [5, 6, 7, 8, 8, 9, 10, 10, 9, 8, 7, 6],
        backgroundColor: 'rgba(19,224,200,0.6)',
        borderColor: '#13e0c8',
        borderWidth: 1
      },
      {
        label: 'No-suministrada',
        data: [1, 1, 1, 2, 2, 1, 1, 2, 2, 1, 1, 1],
        backgroundColor: 'rgba(255,99,132, 0.4)',
        borderColor: 'rgba(255,99,132, 1)',
        borderWidth: 1
      },
      {
        label: 'Excedente',
        data: [0, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1, 2],
        backgroundColor: 'rgba(255, 207, 48, 0.7)',
        borderColor: '#ffcf30',
        borderWidth: 1
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { labels: {color: '#fff'} },
      tooltip: { mode: 'index', intersect: false }
    },
    scales: {
      x: {
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.1)' }
      },
      y: {
        beginAtZero: true,
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.12)' }
      }
    }
  }
});

// Gráfico: Variables Eléctricas (Tensión – Corriente)
const ctxRede = document.getElementById('redeChart').getContext('2d');
new Chart(ctxRede, {
  type: 'line',
  data: {
    labels: ['ene', 'feb', 'mar', 'abr', 'may', 'jun', 'jul', 'ago', 'sep', 'oct', 'nov', 'dic'],
    datasets: [
      {
        label: 'Tensiones',
        data: [208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208],
        borderColor: '#4c9aff',
        backgroundColor: 'rgba(76,154,255,0.15)',
        tension: 0.4,
        fill: false,
        pointRadius: 2
      },
      {
        label: 'Corrientes',
        data: [23, 23, 22, 24, 21, 20, 21, 23, 22, 23, 23, 23],
        borderColor: '#13e0c8',
        backgroundColor: 'rgba(19,224,200,0.15)',
        tension: 0.4,
        fill: false,
        pointRadius: 2
      },
      {
        label: 'Frecuencias',
        data: [60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60],
        borderColor: '#ffe066',
        backgroundColor: 'rgba(255,224,102,0.2)',
        tension: 0.3,
        fill: false,
        pointRadius: 2
      }
    ]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { labels: {color: '#fff'} },
      tooltip: { mode: 'index', intersect: false }
    },
    scales: {
      x: {
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.1)' }
      },
      y: {
        beginAtZero: false,
        ticks: {color: '#85e8f7'},
        grid: { color: 'rgba(136, 136, 136, 0.12)' }
      }
    }
  }
});
</script>

  <script src="{{url_for('static', filename='actualizarReloj')}}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='actualizador.js') }}"></script>
  <script>
      // Llama una vez al cargar la página
      actualizarDatos();
  </script>
</body>
</html>